macro(add_compiler_flags)
    set(flags_list "")
    parse_arguments(ARG "" "C;CXX;DEBUG;RELEASE" ${ARGN})

    if(NOT ARG_DEBUG AND NOT ARG_RELEASE)
      foreach(flag ${ARG_DEFAULT_ARGS})
        set(flags_list "${flags_list} ${flag}")
      endforeach()
      if(NOT ARG_C AND NOT ARG_CXX OR ARG_C)
        set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${flags_list}")
      endif()
      if(NOT ARG_C AND NOT ARG_CXX OR ARG_CXX)
        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${flags_list}")
      endif()
    elseif(ARG_DEBUG)
      foreach(flag ${ARG_DEFAULT_ARGS})
        set(flags_list "${flags_list} ${flag}")
      endforeach()
      if(NOT ARG_C AND NOT ARG_CXX OR ARG_C)
        set(CMAKE_C_FLAGS_DEBUG "${CMAKE_C_FLAGS_DEBUG} ${flags_list}")
      endif()
      if(NOT ARG_C AND NOT ARG_CXX OR ARG_CXX)
        set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} ${flags_list}")
      endif()
    elseif(ARG_RELEASE)
      foreach(flag ${ARG_DEFAULT_ARGS})
        set(flags_list "${flags_list} ${flag}")
      endforeach()
      if(NOT ARG_C AND NOT ARG_CXX OR ARG_C)
        set(CMAKE_C_FLAGS_RELEASE "${CMAKE_C_FLAGS_RELEASE} ${flags_list}")
      endif()
      if(NOT ARG_C AND NOT ARG_CXX OR ARG_CXX)
        set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} ${flags_list}")
      endif()
    endif()
endmacro()

macro(add_linker_flags)
  foreach(flag ${ARGN})
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ${flag}")
	set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} ${flag}")
  endforeach()
endmacro()

macro(set_up_32bit_env)
  if(CMAKE_COMPILER_IS_GNUCXX)
    add_compiler_flags(-m32)
    add_linker_flags(-m32)
  endif()
endmacro()
